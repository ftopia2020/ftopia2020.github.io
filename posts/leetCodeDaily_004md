---
title: âœï¸ã€æ¯æ—¥ä¸€é¢˜ã€‘Goé¢˜è§£ 3. æ‰å¹³åŒ–åµŒå¥—åˆ—è¡¨è¿­ä»£å™¨
date: 2021-03-23
author: "me"
tags: ["ç®—æ³•", "åŸåˆ›", "æ¯æ—¥ä¸€é¢˜"]
categories: ["Web X å¼€å‘"]
---



> ä¸ªäººè¯„ä»·ï¼šè®¾è®¡è¿­ä»£å™¨ =ã€‹DFSé€’å½’ï¼›åµŒå¥—å¯ä½¿ç”¨æ ˆï¼›å¦è€ƒéªŒäº†ä¸€å®šçš„ç†è§£èƒ½åŠ›å’ŒåŸºç¡€å»ºæ¨¡
>
> é¢˜ç›®éš¾åº¦ï¼šğŸŒŸ ğŸŒŸ ï¼ˆå‚è€ƒ LeeCode ç®€å•ğŸŒŸ ã€ä¸­ç­‰ğŸŒŸ ğŸŒŸ ã€å›°éš¾ğŸŒŸ ğŸŒŸ ğŸŒŸ ï¼‰
>
> å¦ï¼Œé€šå¸¸ç®—æ³•é¢˜ä¼šè€ƒå¯Ÿåˆ†ææ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ï¼Œå¯å‚è€ƒç¬”è€…ä¹‹å‰çš„æ–‡ç« 
>
> [ã€Œæ•°æ®ç»“æ„&ç®—æ³•ã€å¿…çŸ¥å¿…ä¼šç³»åˆ—ï¼š3. æ—¶é—´ & ç©ºé—´å¤æ‚åº¦ï¼ˆä¸‹ï¼‰](/2021/algorithmbigo2/)




##  æ‰å¹³åŒ–åµŒå¥—åˆ—è¡¨è¿­ä»£å™¨

### é¢˜ç›®æè¿°

[341. æ‰å¹³åŒ–åµŒå¥—åˆ—è¡¨è¿­ä»£å™¨](https://leetcode-cn.com/problems/flatten-nested-list-iterator/)

ç»™ä½ ä¸€ä¸ªåµŒå¥—çš„æ•´å‹åˆ—è¡¨ã€‚è¯·ä½ è®¾è®¡ä¸€ä¸ªè¿­ä»£å™¨ï¼Œä½¿å…¶èƒ½å¤Ÿéå†è¿™ä¸ªæ•´å‹åˆ—è¡¨ä¸­çš„æ‰€æœ‰æ•´æ•°ã€‚

åˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹æˆ–è€…ä¸ºä¸€ä¸ªæ•´æ•°ï¼Œæˆ–è€…æ˜¯å¦ä¸€ä¸ªåˆ—è¡¨ã€‚å…¶ä¸­åˆ—è¡¨çš„å…ƒç´ ä¹Ÿå¯èƒ½æ˜¯æ•´æ•°æˆ–æ˜¯å…¶ä»–åˆ—è¡¨ã€‚

 

**ç¤ºä¾‹ 1:**

> è¾“å…¥: [[1,1],2,[1,1]]
>
> è¾“å‡º: [1,1,2,1,1]

è§£é‡Š: é€šè¿‡é‡å¤è°ƒç”¨ next ç›´åˆ° hasNext è¿”å› falseï¼Œnext è¿”å›çš„å…ƒç´ çš„é¡ºåºåº”è¯¥æ˜¯: [1,1,2,1,1]ã€‚



**ç¤ºä¾‹ 2:**

> è¾“å…¥: [1,[4,[6]]]
>
> è¾“å‡º: [1,4,6]

è§£é‡Š: é€šè¿‡é‡å¤è°ƒç”¨ next ç›´åˆ° hasNext è¿”å› falseï¼Œnext è¿”å›çš„å…ƒç´ çš„é¡ºåºåº”è¯¥æ˜¯: [1,4,6]ã€‚






### è§£é¢˜æ€è·¯

#### æ–¹æ³•ä¸€

å¦‚æœåªæ˜¯å•çº¯çš„å±•å¼€åµŒå¥— listï¼Œä¸éš¾è§£ï¼Œç¡®è®¤æœ€å°ç²’åº¦çš„å…ƒç´ ï¼šæ•´æ•°/æ•´æ•°æ•°ç»„

æ‰€ä»¥ï¼Œå…³é”®æ˜¯å±•å¼€çš„é€’å½’å‡½æ•°ï¼ŒGolang å®ç°å¦‚ä¸‹ï¼š

```go
func flatten(n *NestedInteger) []int {
    res := []int{}
    if n.IsInteger() { // æ˜¯å¦æ•°å­—
        res = append(res, n.GetInteger()) // åŠ å…¥æ•°å­—
    } else { // éæ•°å­—
        for _, child := range n.GetList() {
            res = append(res, flatten(child)...) // é€’å½’
        }
    }
    return res // è¿”å›æ‰å¹³åçš„ç»“æœæ•°ç»„
}
```

æ„é€ ç±»å‹ï¼ˆstructï¼‰`NestedIterator`ï¼Œä»é¢˜ç›®ä¸­ï¼Œæˆ‘ä»¬äº†è§£åˆ°éœ€è¦è®°å½•ç¬¬ä¸€å±‚æ•°ç»„çš„éå†ä¸‹æ ‡ï¼Œå› æ­¤æ„å»ºç±»å‹ã€å¯¹åº”çš„æ„å»ºæ•°ç»„åˆ©ç”¨äº†ä¸Šè¿° `flatten` æ–¹æ³•ã€‚

Golang å®ç°å‚è€ƒå¦‚ä¸‹ï¼š

```go
type NestedIterator struct {
    vals []int // å±•å¼€åçš„æ•°ç»„
    index int  // indexæ˜¯å½“å‰ Nextè°ƒç”¨åº”è¯¥è¿”å›çš„ ç¬¬indexä¸ªæ•°
}

func Constructor(nestedList []*NestedInteger) *NestedIterator {
    list := []int{}
    for _, n := range nestedList { // éå†nestedList
      list = append(list, flatten(n)...) // å½“å‰å…ƒç´  append flatten(n)
    }
    return &NestedIterator{index: 0, vals: list} // åˆ›å»ºå¹¶è¿”å›è¿­ä»£å™¨ï¼Œåˆå§‹ä¸‹æ ‡indexä¸º0
}
```

`Next()` æ–¹æ³•å’Œåˆ¤æ–­æ˜¯å¦ç»“æŸ `HasNext()` åº”è¯¥ä¸éš¾ç†è§£

```go
func (this *NestedIterator) Next() int {
    val := this.vals[this.index] // è·å–å…ƒç´ 
    this.index++                 // æ›´æ–°index
    return val
}

func (this *NestedIterator) HasNext() bool {
    return this.index < len(this.vals)
}
```

å¤æ‚åº¦ï¼Ÿ

- æ—¶é—´å¤æ‚åº¦ï¼šåˆå§‹åŒ–ä¸º O(n)ï¼Œå…¶ä¸­ n æ˜¯åµŒå¥—çš„æ•´å‹åˆ—è¡¨ä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚`Next()` æ“ä½œ O(1)
- ç©ºé—´å¤æ‚åº¦ï¼šO(n) éœ€è¦ä¸€ä¸ªæ•°ç»„å­˜å‚¨åµŒå¥—çš„æ•´å‹åˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ 



#### æ–¹æ³•äºŒ

å‚è€ƒç½‘å‹è§£æ³•ï¼Œè§£é‡Šè›®ç²¾è¾Ÿçš„ï¼Œå•Šå“ˆå“ˆ~

> æ ˆåƒä¸€ä¸ªåŠ³æ”¹è¥ï¼Œå…ƒç´ ä»åå¾€å‰ä¸€ä¸ªä¸ªå…¥æ ˆï¼ˆå‰é¢å…ƒç´ åè¿›å»ï¼Œæ ˆåè¿›å…ˆå‡ºï¼ŒNextèƒ½å…ˆæ‹¿åˆ°å‰é¢å…ƒç´ ï¼‰ï¼Œè¿›æ ˆäº†å¤§å®¶æš‚æ—¶ç›¸å®‰æ— äº‹ã€‚
>
> ç­‰åˆ°Nextè°ƒç”¨æ—¶ï¼Œè¦æ‹¿integeräº†ï¼Œæ‰å¿™æ´»èµ·æ¥ï¼Œæ•´é¡¿ä¸€ä¸‹æ ˆé¡¶
>
> å®¡æŸ¥ä¸€ä¸‹æ ˆé¡¶å…ƒç´ ï¼Œæ˜¯integerå°±æ²¡äº‹ï¼Œæ˜¯åµŒå¥—list å°±popå‡ºæ¥ï¼ŒæŠŠå®ƒé‡Œé¢çš„å…ƒç´ ä¸€ä¸ªä¸ªå†å¡å…¥æ ˆ
>
> æœ‰å¯èƒ½æ–°çš„æ ˆé¡¶è¿˜ä¸æ˜¯ integerï¼Œç»§ç»­ä¸Šè¿°æ“ä½œï¼Œç›´åˆ°æ ˆé¡¶æ˜¯ integer æˆ–æ ˆç©ºäº†
>
> è¿™æ ·æ•´é¡¿åï¼Œè¦ä¹ˆæ ˆç©ºäº†ï¼Œè¦ä¹ˆæ ˆé¡¶ä¸€å®šæ˜¯integeräº†

> ä½œè€…ï¼šxiao_ben_zhu è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„
>
> æ¥æºï¼š[åŠ›æ‰£ï¼ˆLeetCodeï¼‰é“¾æ¥](https://leetcode-cn.com/problems/flatten-nested-list-iterator/solution/zhan-he-di-gui-liang-chong-jie-fa-341-bi-lunq/)

```go
type NestedIterator struct {
	Stack []*NestedInteger // æ ˆæ˜¯ç”¨æ¥æš‚å­˜å…ƒç´ çš„
}

func Constructor(nestedList []*NestedInteger) *NestedIterator {
	stack := []*NestedInteger{}
	for i := len(nestedList) - 1; i >= 0; i-- { // å°†å…ƒç´ ä»åå¼€å§‹ä¸€ä¸ªä¸ªå…¥æ ˆ
		stack = append(stack, nestedList[i]) // ä»åæ˜¯å› ä¸ºåè¿›å…ˆå‡ºï¼Œä½äºå‰é¢çš„è¦å…ˆå‡º
	}
	return &NestedIterator{Stack: stack} // åˆå§‹åŒ–å¹¶è¿”å›è¿™ä¸ªè¿­ä»£å™¨
}

func (this *NestedIterator) Next() int {
	this.stackTop2Integer()                     // å°†æ ˆé¡¶å…ƒç´ è½¬æˆinteger
	top := this.Stack[len(this.Stack)-1]        // è·å–æ ˆé¡¶
	this.Stack = this.Stack[:len(this.Stack)-1] // popæ‰æ ˆé¡¶
	return top.GetInteger()                     // è¿”å›integer
}

func (this *NestedIterator) HasNext() bool {
	this.stackTop2Integer()    // å°†æ ˆé¡¶å…ƒç´ è½¬æˆinteger
	return len(this.Stack) > 0 // å¦‚æœstackæ²¡æœ‰ç©ºã€‚è¯´æ˜èƒ½è·å–åˆ°integer
}

// å°†æ ˆé¡¶å…ƒç´ å˜æˆintegerï¼ˆé€šè¿‡å°†listæ ˆé¡¶popå‡ºæ¥ï¼Œå†å°†å®ƒé‡Œé¢çš„å…ƒç´ ä¸€ä¸ªä¸ªå†æ”¾è¿›å»ï¼‰
func (this *NestedIterator) stackTop2Integer() {
	for len(this.Stack) > 0 { // ç›´åˆ°æ ˆç©ºäº†
		top := this.Stack[len(this.Stack)-1] // è·å–æ ˆé¡¶
		if top.IsInteger() {                 // æ ˆé¡¶å·²ç»æ˜¯integerï¼Œä»€ä¹ˆéƒ½ä¸åš
			return
		}
		this.Stack = this.Stack[:len(this.Stack)-1] // æ ˆé¡¶æ˜¯listï¼Œå¼¹å‡ºæ ˆé¡¶
		list := top.GetList()                       // è·å–list
		for i := len(list) - 1; i >= 0; i-- {       // ä»åå¼€å§‹éå†list
			this.Stack = append(this.Stack, list[i])  // å°†listçš„å…ƒç´ æ¨å…¥æ ˆ
		}
	}
}
```



### æ€»ç»“

ä¸ªäººæ„Ÿè§‰æ­¤é¢˜ä½¿ç”¨é€’å½’æš´åŠ›å±•å¼€å³å¯ï¼Œéœ€è¦ä¸€å®šçš„ç†è§£åŠ›è¿˜æœ‰é€’å½’ä½¿ç”¨æ–¹æ³•ã€‚

æ ˆçš„ä½¿ç”¨åˆ©äº `Next()` æ—¶ä¸€ä¸ªä¸ªæ“ä½œï¼Œè€Œæ— é¡»æ„å»ºæ—¶å°±ä¸€ä¸€å±•å¼€ã€‚

> ç­‰åˆ°Nextè°ƒç”¨æ—¶ï¼Œè¦æ‹¿integeräº†ï¼Œæ‰å¿™æ´»èµ·æ¥ï¼Œæ•´é¡¿ä¸€ä¸‹æ ˆé¡¶  <(*ï¿£â–½ï¿£*)/

