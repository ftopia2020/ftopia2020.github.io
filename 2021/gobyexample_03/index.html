<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noodp"/>
    <meta name="author" content="Faye.Fei">
    <meta name="description" content="个人技术博客">
    <meta name="keywords" content="ftopia fei">
    
    <link rel="prev" href="https://ftopia2020.github.io/2021/leetcodedaily_008/" />
    <link rel="next" href="https://ftopia2020.github.io/2021/apitestrunner/" />
    <link rel="canonical" href="https://ftopia2020.github.io/2021/gobyexample_03/" />
    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <link href="//use.fontawesome.com/releases/v5.9.0/css/all.css" rel="stylesheet">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <title>
         
         
             💪 三天刷完 Go by Example（下） | Ftopia
         
    </title>
    <meta name="title" content="💪 三天刷完 Go by Example（下） | Ftopia">
      
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


    
    
 

<script type="application/ld+json">
{   "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/ftopia2020.github.io\/"
    },
    "articleSection" : "posts",
    "name" : "💪 三天刷完 Go by Example（下）",
    "headline" : "💪 三天刷完 Go by Example（下）",
    "description" : "本文为系列文章，Go 基础语法可回顾上篇 三天刷完 Go by Example（上） Github 代码：https:\/\/github.com\/ftopia2020\/g",
    "inLanguage" : "en-us",
    "author" : "me",
    "creator" : "me",
    "publisher": "me",
    "accountablePerson" : "me",
    "copyrightHolder" : "me",
    "copyrightYear" : "2021",
    "datePublished": "2021-03-31 00:00:00 \x2b0000 UTC",
    "dateModified" : "2021-03-31 00:00:00 \x2b0000 UTC",
    "url" : "https:\/\/ftopia2020.github.io\/2021\/gobyexample_03\/",
    "wordCount" : "3660",
    "keywords" : [ "Golang","原创", "Ftopia"]
}
</script>

  </head>
  
    
  
  
<aside class="side-toc">
    
    <nav id="TableOfContents">
  <ul>
    <li><a href="#40-sorting">40 Sorting</a></li>
    <li><a href="#41-sorting-by-functions">41 Sorting By Functions</a></li>
    <li><a href="#42-panic">42 Panic</a></li>
    <li><a href="#43-defer">43 Defer</a></li>
    <li><a href="#44-collection-functions">44 Collection Functions</a></li>
    <li><a href="#45-string-functions">45 String Functions</a></li>
    <li><a href="#46-string-formatting">46 String Formatting</a></li>
    <li><a href="#47-regular-expressions">47 Regular Expressions</a></li>
    <li><a href="#48-json">48 Json</a></li>
    <li><a href="#49-xml">49 XML</a></li>
    <li><a href="#50-time">50 Time</a></li>
    <li><a href="#51-epoch">51 Epoch</a></li>
    <li><a href="#52-time-formatting">52 Time Formatting</a></li>
    <li><a href="#53-random-numbers">53 Random Numbers</a></li>
    <li><a href="#54-number-parsing">54 Number Parsing</a></li>
    <li><a href="#55-url-parsing">55 URL Parsing</a></li>
    <li><a href="#56-sha1-hashes">56 SHA1 Hashes</a></li>
    <li><a href="#57-base64-encoding">57 Base64 Encoding</a></li>
    <li><a href="#59-writing-files">59 Writing Files</a></li>
    <li><a href="#58-reading-files">58 Reading Files</a></li>
    <li><a href="#60-line-filters">60 Line Filters</a></li>
    <li><a href="#61-file-paths">61 File Paths</a></li>
    <li><a href="#62-directories">62 Directories</a></li>
    <li><a href="#63-temporary-files-and-directories">63 Temporary Files and Directories</a></li>
    <li><a href="#64-testing">64 Testing</a></li>
    <li><a href="#65-command-lines">65 Command Lines</a></li>
    <li><a href="#66-command-line-flags">66 Command Line Flags</a></li>
    <li><a href="#67-command-line-subcommands">67 Command Line Subcommands</a></li>
    <li><a href="#68-environment-variables">68 Environment Variables</a></li>
    <li><a href="#69-http-clients">69 HTTP Clients</a></li>
    <li><a href="#70-http-servers">70 HTTP Servers</a></li>
    <li><a href="#71-context">71 Context</a></li>
    <li><a href="#72-execing-processes">72 Execing Processes</a></li>
    <li><a href="#73-signals">73 Signals</a></li>
    <li><a href="#74-exit">74 Exit</a></li>
  </ul>
</nav>
</aside>

  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    
    <div class="top-scroll-bar"></div>
    
    <div class="container">
        <div class="navbar-header header-logo">
            <a href="https://ftopia2020.github.io/" style="margin-left: 20px">
                <img src="/favicon-32x32.png" style="width: 16px;" />
                <span> Ftopia </span>

            </a>
        </div>
        <div class="menu navbar-right">
            
            
            <a class="menu-item"
                href="/posts/" title="">Blog</a>
            
            <a class="menu-item"
                href="/categories/" title="">Categories</a>
            
            <a class="menu-item"
                href="/tags/" title="">Tags</a>
            
            <a class="menu-item"
                href="/about/" title="">About</a>
            
            <a href="javascript:void(0);" class="theme-switch"><i class="fas fa-adjust fa-fw"></i></a>
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
    
    <div class="top-scroll-bar"></div>
    
    <div class="container">
        <div class="navbar-header">
            <div> <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a
                    href="https://ftopia2020.github.io/">Ftopia</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>

        <div class="menu" id="mobile-menu">
            
            
            <a class="menu-item"
                href="/posts/" title="">Blog</a>
            
            <a class="menu-item"
                href="/categories/" title="">Categories</a>
            
            <a class="menu-item"
                href="/tags/" title="">Tags</a>
            
            <a class="menu-item"
                href="/about/" title="">About</a>
            
        </div>
    </div>
</nav>
        
        
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">💪 三天刷完 Go by Example（下）</h1>
        <div class="post-meta">

            <i class="far fa-folder-open"></i>
            <span class="post-category">
                
            </span>
            &nbsp;
            By me ♥
            &nbsp;
            <span class="post-time">
                <i class="far fa-calendar-alt"></i>
                <time datetime=2021-03-31
                    itemprop="datePublished">
                    2021-03-31</time>
            </span>
            &nbsp;
            <i class="far fa-file-word"></i> <span class="post-word-count"> 3660 字</span>
            &nbsp;
            <i class="far fa-clock"></i> <span class="more-meta"> 8 分钟</span>

        </div>
    </header>
    <div class="post-content">
        

        
        
        

        
        

        
        
        

        
        
        

        <blockquote>
<p>本文为系列文章，Go 基础语法可回顾上篇 <a href="/2021/gobyexample_01/">三天刷完 Go by Example（上）</a></p>
<p>Github 代码：<a href="https://github.com/ftopia2020/go_by_examples">https://github.com/ftopia2020/go_by_examples</a></p>
</blockquote>
<p>本篇是一些 Golang 具体开发场景的示例，包含以下内容：</p>
<ul>
<li>一些内置包的常用方法（如：sort, time, io, os, fmt, json, xml 等）</li>
<li>Panic</li>
<li>Defer</li>
<li>数据解析</li>
<li>文件读写</li>
<li>单元测试</li>
<li>命令行操作</li>
<li>HTTP 客户端/服务端 简单实现</li>
<li>生成进程 / 执行进程</li>
<li>信号</li>
<li>退出</li>
</ul>
<h2 id="40-sorting">40 Sorting</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210330191949604.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p><a href="https://golang.org/pkg/sort/">sort</a> 包实现了四种基本排序算法：插入排序、归并排序、堆排序和快速排序。 但是这四种排序方法是不公开的，它们只被用于 sort 包内部使用。sort 包会根据实际数据自动选择高效的排序算法 🐂</p>
<p>有时间的 TX 可以深入看下源码，排序的注释很清晰明了，还加了复杂度说明 👍</p>
</blockquote>
<h2 id="41-sorting-by-functions">41 Sorting By Functions</h2>
<blockquote>
<p>使用自定义的函数排序：创建一个自定义类型， 为它实现 <code>Interface</code> 接口的三个方法（Len, Swap, Less）， 然后对这个自定义类型的切片调用 <code>sort.Sort</code> 方法， 我们就可以通过任意函数对 Go 切片进行排序了。</p>
</blockquote>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331101632646.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<h2 id="42-panic">42 Panic</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331103648373.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<p>尝试下在 <code>/tmp</code> 文件夹下面创建 <code>file</code> 文件夹，注释首个 panic 语句，再次运行查看</p>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331104102666.png" alt="image-20210331104102666" class="lazyload"><figcaption class="image-caption">image-20210331104102666</figcaption></figure></p>
<p>当然，你也可以试下删除 file 文件夹，之后运行试试</p>
<blockquote>
<p>字面意 Panic，「恐慌」性的异常，代表比较严重的问题，通常表示正常运行中必不可出现的错误，或者不准备处理的错误。</p>
<p>panic 可通过 recover 恢复，更多详见 <a href="https://golang.org/doc/effective_go#errors">https://golang.org/doc/effective_go#errors</a></p>
<p>Go 的 <code>runtime</code> 代码中很多地方都调用了 <code>panic</code> 函数，像是数组下标越界、空指针等，平时应该很常见了</p>
<p>!!!注意，与某些使用 exception 处理错误的语言不同， 在 Go 中，通常会尽可能的使用返回值来标示错误。</p>
</blockquote>
<h2 id="43-defer">43 Defer</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331104708714.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p><em>Defer</em> 用于确保程序在执行完成后，会调用某个函数，一般是执行清理工作。 Defer 的用途跟其他语言的 <code>ensure</code> 或 <code>finally</code> 类似。</p>
<p>另外，<code>recover</code> 只能在 <code>defer</code> 语句中使用, 直接调用 <code>recover</code> 是无效的</p>
</blockquote>
<h2 id="44-collection-functions">44 Collection Functions</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331111409857.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331111453781.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p>我们经常需要程序对数据集合执行操作， 例如选择满足给定条件的全部 item， 或通过自定义函数将全部 item 映射到一个新的集合。</p>
<p>在其它语言中，通常会使用<a href="http://zh.wikipedia.org/wiki/%E6%B3%9B%E5%9E%8B">泛型</a>数据结构和算法。 但 Go 不支持泛型，如果你的程序或者数据类型有需要，通常的做法是提供函数集。</p>
<p>这是一些 <code>strings</code> 切片的组合函数示例。 你可以使用这些例子来构建自己的函数。 注意，在某些情况下，最简单明了的方法是： 直接内联操作方法集，而不是创建并调用帮助函数。</p>
</blockquote>
<h2 id="45-string-functions">45 String Functions</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331111716185.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p><code>strings</code> 包提供了不少内置字符串处理方法，详见 <a href="https://golang.org/pkg/strings/">https://golang.org/pkg/strings/</a></p>
<p>你可以使用类似 import 别名以及自定义 var 的方法简化重复代码的使用</p>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331111954134.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
</blockquote>
<h2 id="46-string-formatting">46 String Formatting</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331114403750.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p>Go 在传统的 <code>fmt.Printf</code> 中对字符串格式化提供了优异的支持；详见 <a href="https://golang.org/pkg/fmt/">https://golang.org/pkg/fmt/</a></p>
</blockquote>
<h2 id="47-regular-expressions">47 Regular Expressions</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331112559522.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p>Go 提供了内建的<a href="http://zh.wikipedia.org/wiki/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F">正则表达式</a>支持。 这儿有一些在 Go 中与 <a href="https://golang.org/pkg/regexp/">regexp</a> 相关的常见用法示例。</p>
</blockquote>
<h2 id="48-json">48 Json</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331112906004.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331112955507.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p>Go 提供内建的 JSON 编码解码（序列化反序列化）支持， 包括内建及自定义类型与 JSON 数据之间的转化。</p>
<p>如果想要获取更多的信息， 请查阅 <a href="http://blog.golang.org/2011/01/json-and-go.html">JSON and Go</a> 博文 和 <a href="http://golang.org/pkg/encoding/json/">JSON package docs</a>。</p>
<p>另，使用 “先转换成json序列<code>json.Marshal</code>，再解析<code>json.Unmarshal</code>序列” 的方式，是实现对象的深拷贝（克隆）的一种方式。</p>
<p>！！但是，虽然基本上能够应对大部分的需求，缺点则是性能低，且有各种限制，比如无法处理递归指针、无法处理 <code>interface</code> 类型数据，会丢失缺少大部分数据类型甚至精度。</p>
</blockquote>
<h2 id="49-xml">49 XML</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331113835146.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<h2 id="50-time">50 Time</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331114007919.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p>Go 为时间（time）和时间段（duration）提供了大量的支持，详见 <a href="https://golang.org/pkg/time/">https://golang.org/pkg/time/</a></p>
</blockquote>
<h2 id="51-epoch">51 Epoch</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331114200795.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p>如何用 Go 来实现？获取 <a href="http://zh.wikipedia.org/wiki/UNIX%E6%97%B6%E9%97%B4">Unix 时间</a> 的秒数，毫秒数，或者微秒数</p>
</blockquote>
<h2 id="52-time-formatting">52 Time Formatting</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331114538247.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p>Go 支持通过基于描述模板的时间格式化与解析</p>
<p>时间解析使用与 <code>Format</code> 相同的布局值，当输入的时间格式不正确时，<code>Parse</code> 会返回一个解析错误</p>
</blockquote>
<h2 id="53-random-numbers">53 Random Numbers</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331115116605.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p>有关 Go 提供的其他随机数的信息， 请参阅 <a href="http://golang.org/pkg/math/rand/"><code>math/rand</code></a> 包文档</p>
</blockquote>
<h2 id="54-number-parsing">54 Number Parsing</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331115416763.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p>Golang 从字符串中解析数字的常规操作；更多详见：<a href="https://golang.org/pkg/strconv/">https://golang.org/pkg/strconv/</a></p>
</blockquote>
<h2 id="55-url-parsing">55 URL Parsing</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331115527117.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p>由 <a href="net/url">net/url</a> 包提供内置解析方法，之后的示例也会涉及到 Golang net 包的使用场景</p>
</blockquote>
<h2 id="56-sha1-hashes">56 SHA1 Hashes</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331115914906.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p>你可以使用和上面相似的方式来计算其他形式的散列值。 例如，计算 MD5 散列，引入 <code>crypto/md5</code> 并使用 <code>md5.New()</code> 方法</p>
<p>注意，如果你需要密码学上的安全散列，你需要仔细的研究一下 <a href="http://en.wikipedia.org/wiki/Cryptographic_hash_function">加密散列函数</a></p>
</blockquote>
<h2 id="57-base64-encoding">57 Base64 Encoding</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331120015905.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p>Go 提供了对 <a href="http://zh.wikipedia.org/wiki/Base64">base64 编解码 </a>的内建支持；标准 base64 编码和 URL base64 编码的 编码字符串存在稍许不同（后缀为 <code>+</code> 和 <code>-</code>）， 但是两者都可以正确解码为原始字符串</p>
</blockquote>
<h2 id="59-writing-files">59 Writing Files</h2>
<blockquote>
<p>这边调整了下示例顺序，先写入文件，再读取文件</p>
</blockquote>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331142527023.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p>示例中分别采用了两种方式来写 dat1 和 dat2 文件</p>
<ol>
<li>
<p><code>ioutill.WriteFile</code> 来把字符串直接写入文件（0644 为 FileMode）</p>
</li>
<li>
<p><code>os.Create</code> 创建空文件并打开，！习惯性的操作：立即使用 defer 调用文件的 <code>Close</code></p>
<ul>
<li>字节切片方式写入文件（10 为换行符）</li>
<li><code>f.WriteString</code> 方法写入字符串</li>
</ul>
</li>
</ol>
</blockquote>
<h2 id="58-reading-files">58 Reading Files</h2>
<blockquote>
<p>改写了示例读取内容，复用了示例 59 写入的文件</p>
</blockquote>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331143536786.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p>我们了解了 Golang 处理文件读、写的方式，接下来，我们看看它在 <code>stdin</code> 和 <code>stdout</code> 流中的应用</p>
</blockquote>
<h2 id="60-line-filters">60 Line Filters</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331144715324.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p>运行后输入任意，查看输出打印</p>
<p>用带缓冲的 scanner 包装无缓冲的 <code>os.Stdin</code>， 这为我们提供了一种方便的 <code>Scan</code> 方法， 将 scanner 前进到下一个 <code>令牌</code>（默认为：下一行）</p>
</blockquote>
<h2 id="61-file-paths">61 File Paths</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331145040150.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p><a href="https://golang.org/pkg/path/filepath/">filepath</a> 包为 <em>文件路径</em> ，提供了方便的跨操作系统的解析和构建函数</p>
</blockquote>
<h2 id="62-directories">62 Directories</h2>
<blockquote>
<p>注释掉删除 subdir 文件夹的代码，可查看创建的文件夹及其下面的文件</p>
</blockquote>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331150117763.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331150507346.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p>对于操作文件系统中的 <em>目录</em> ，Go 提供了几个非常有用的函数</p>
</blockquote>
<h2 id="63-temporary-files-and-directories">63 Temporary Files and Directories</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331163116666.png" alt="image-20210331163116666" class="lazyload"><figcaption class="image-caption">image-20210331163116666</figcaption></figure></p>
<blockquote>
<p>创建临时文件最简单的方法是调用 <code>ioutil.TempFile</code> 函数。 它会创建并打开文件，我们可以对文件进行读写。 函数的第一个参数传 <code>&quot;&quot;</code>，<code>ioutil.TempFile</code> 会在操作系统的默认位置下创建该文件。</p>
<p><code>defer </code> 删除该文件。 尽管操作系统会自动在某个时间清理临时文件，但手动清理是一个好习惯。</p>
</blockquote>
<h2 id="64-testing">64 Testing</h2>
<blockquote>
<p>想要写出好的 Go 程序，单元测试是很重要的一部分。 <code>testing</code> 包为提供了编写单元测试所需的工具，写好单元测试后，我们可以通过 <code>go test</code> 命令运行测试。</p>
<p>更多有关单元测试内容，建议查阅 <a href="https://books.studygolang.com/The-Golang-Standard-Library-by-Example/chapter09/09.1.html">https://books.studygolang.com/The-Golang-Standard-Library-by-Example/chapter09/09.1.html</a></p>
</blockquote>
<blockquote>
<p>以下示例调整了对应的文件名称：</p>
<ul>
<li>
<p>需要被测试的代码： <code>intutils.go</code></p>
</li>
<li>
<p>其对应的测试文件： <code>intutils_test.go</code></p>
</li>
</ul>
<p>为方便演示，例子的代码位于 <code>main</code> 包，实际上，单元测试的代码可以位于任何包下。 测试代码通常与需要被测试的代码位于同一个包下。</p>
<p>你可以尝试故意改变部分测试数据为错误的，再查看运行结果。</p>
</blockquote>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331154047697.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ go test			<span style="color:#75715e"># 运行测试</span>
$ go test -v	<span style="color:#75715e"># 运行测试 打印详细用例运行结果</span>
<span style="color:#75715e"># 更多信息，可运行 go help test 和 go help testflag 了解</span>
</code></pre></div><p>有关单元测试，有几点需要记的：</p>
<ul>
<li>测试套件：名称以 _test.go 结尾，该文件包含 <code>TestXxx</code> 函数，通常将该文件放在与被测试文件相同的包中</li>
<li><code>t.Error*</code> 会报告测试失败的信息，然后继续运行测试</li>
<li><code>t.Fail*</code> 会报告测试失败的信息，然后立即终止测试</li>
</ul>
<h2 id="65-command-lines">65 Command Lines</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331163335447.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ go build 
</code></pre></div><blockquote>
<p><a href="http://en.wikipedia.org/wiki/Command-line_interface#Arguments"><em>命令行参数</em></a> 是指定程序运行参数的一个常见方式。例如，<code>go run hello.go</code>， 程序 <code>go</code> 使用了 <code>run</code> 和 <code>hello.go</code> 两个参数</p>
<p>创建了新文件夹以保存该示例，并事先运行了 <code>go build</code> 编译了可执行二进制文件</p>
<p>下面看看更高级的使用标记的命令行处理方法</p>
</blockquote>
<h2 id="66-command-line-flags">66 Command Line Flags</h2>
<blockquote>
<p><a href="http://en.wikipedia.org/wiki/Command-line_interface#Command-line_option"><em>命令行标志</em></a> 是命令行程序指定选项的常用方式。例如，在 <code>wc -l</code> 中， 这个 <code>-l</code> 就是一个命令行标志</p>
<p>Go 提供了 <a href="https://golang.org/pkg/flag/">flag</a> 包，支持基本的命令行标志解析</p>
<p>创建了新文件夹以保存该示例，并事先运行了 <code>go build</code> 编译了可执行二进制文件</p>
</blockquote>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331164014969.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ go build 66_command-line-flags.go <span style="color:#75715e"># 构建二进制文件</span>
$ ./66_command-line-flags -word<span style="color:#f92672">=</span>opt -numb<span style="color:#f92672">=</span><span style="color:#ae81ff">7</span> -fork -svar<span style="color:#f92672">=</span>flag	<span style="color:#75715e"># 给所有标志赋值，尝试运行构建的程序</span>
$ ./66_command-line-flags -word<span style="color:#f92672">=</span>opt <span style="color:#75715e"># 省略一个标志，自动设定默认值</span>
$ ./66_command-line-flags -word<span style="color:#f92672">=</span>opt a1 a2 a3 <span style="color:#75715e"># 尾随的位置参数可以出现在任何标志后面</span>
$ ./66_command-line-flags -word<span style="color:#f92672">=</span>opt a1 a2 a3 -numb<span style="color:#f92672">=</span><span style="color:#ae81ff">7</span> <span style="color:#75715e"># 注意，flag 包需要所有的标志出现位置参数之前（否则，这个标志将会被解析为位置参数）</span>
$ ./66_command-line-flags -h 	<span style="color:#75715e"># 使用 -h 或者 --help 标志来得到自动生成的这个命令行程序的帮助文本</span>
$ ./66_command-line-flags -wat <span style="color:#75715e"># 提供了一个没有使用 flag 包声明的标志， 程序会输出一个错误信息，并再次显示帮助文本</span>
</code></pre></div><p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331164523352.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<h2 id="67-command-line-subcommands">67 Command Line Subcommands</h2>
<blockquote>
<p><code>go</code> 和 <code>git</code> 这种命令行工具，都有很多的 <em>子命令</em> 。 并且每个工具都有一套自己的 flag，比如： <code>go build</code> 和 <code>go get</code> 是 <code>go</code> 里面的两个不同的子命令。 <code>flag</code> 包让我们可以轻松的为工具定义简单的子命令</p>
</blockquote>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331165314868.png" alt="image-20210331165314868" class="lazyload"><figcaption class="image-caption">image-20210331165314868</figcaption></figure></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ ./67_command-line-subcommands foo -enable -name<span style="color:#f92672">=</span>joe a1 a2		<span style="color:#75715e"># 调用 foo 子命令</span>
$ ./67_command-line-subcommands bar -level <span style="color:#ae81ff">8</span> a1		<span style="color:#75715e"># 试一下 bar 子命令</span>
$ ./67_command-line-subcommands bar -enable a1		<span style="color:#75715e"># bar 不接受 foo 的 flag（enable）</span>
</code></pre></div><h2 id="68-environment-variables">68 Environment Variables</h2>
<blockquote>
<p><a href="http://zh.wikipedia.org/wiki/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><em>环境变量</em></a> 是一种<a href="http://www.12factor.net/config">向 Unix 程序传递配置信息</a>的常见方式。 让我们来看看如何设置、获取以及列出环境变量</p>
</blockquote>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331165533537.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331165637247.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<blockquote>
<p>键的列表是由你的电脑情况而定的</p>
<p>如果我们在运行前设置了 <code>BAR</code> 的值，那么运行程序将会获取到这个值</p>
</blockquote>
<h2 id="69-http-clients">69 HTTP Clients</h2>
<blockquote>
<p>Go 标准库的 <a href="net/http">net/http</a> 包为 HTTP 客户端和服务端提供了出色的支持</p>
<p>在这个例子中，我们将使用它发送简单的 HTTP 请求</p>
</blockquote>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331170208551.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<h2 id="70-http-servers">70 HTTP Servers</h2>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331171421408.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<p><em>handlers</em> 是 <code>net/http</code> 服务器里面的一个基本概念。 handler 对象实现了 <code>http.Handler</code> 接口。 编写 handler 的常见方法是，在具有适当签名的函数上使用 <code>http.HandlerFunc</code> 适配器</p>
<p>handler 函数有两个参数，<code>http.ResponseWriter</code> 和 <code>http.Request</code>。 response writer 被用于写入 HTTP 响应数据，这里我们简单的返回 “hello\n”</p>
<p>handler 函数有两个参数，<code>http.ResponseWriter</code> 和 <code>http.Request</code>。 response writer 被用于写入 HTTP 响应数据，这里我们简单的返回 “hello\n”</p>
<p>使用 <code>http.HandleFunc</code> 函数，可以方便的将我们的 handler 注册到服务器路由。 它是 <code>net/http</code> 包中的默认路由，接受一个函数作为参数</p>
<p>最后，我们调用 <code>ListenAndServe</code> 并带上端口和 handler。 nil 表示使用我们刚刚设置的默认路由器</p>
<blockquote>
<p>从截图运行中，看到查看了本机的端口占用情况（如被其他应用占用，可更改对应端口），并且 curl 访问了 hello 路由</p>
</blockquote>
<h2 id="71-context">71 Context</h2>
<blockquote>
<p>有时，Go 程序需要生成其他的、非 Go 的进程, <a href="https://golang.org/pkg/os/exec/">os/exec</a>  包可实现运行外部命令</p>
</blockquote>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331172912547.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<h2 id="72-execing-processes">72 Execing Processes</h2>
<blockquote>
<p>时候，我们只想用其它（也许是非 Go）的进程，来完全替代当前的 Go 进程。 这时，我们可以使用经典的 <a href="http://en.wikipedia.org/wiki/Exec_(operating_system)"><code>exec</code></a> 函数的 Go 的实现</p>
</blockquote>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331173734268.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<h2 id="73-signals">73 Signals</h2>
<blockquote>
<p>有时候，我们希望 Go 可以智能的处理 <a href="http://en.wikipedia.org/wiki/Unix_signal">Unix 信号</a>。 例如，我们希望当服务器接收到一个 <code>SIGTERM</code> 信号时，能够优雅退出， 或者一个命令行工具在接收到一个 <code>SIGINT</code> 信号时停止处理输入信息。 我们这里讲的就是在 Go 中如何使用通道来处理信号。</p>
</blockquote>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331174526772.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<h2 id="74-exit">74 Exit</h2>
<blockquote>
<p>使用 <code>os.Exit</code> 可以立即以给定的状态退出程序</p>
</blockquote>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://files.ftopia.cn/blog/image-20210331174917117.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>

    </div>

    <div class="post-copyright">
        
        <p class="copyright-item">
            <span>Author:</span>
            <span>Faye.Fei </span>
        </p>
        

        
        <p class="copyright-item">
            <span>Link:</span>
            <a href=https://ftopia2020.github.io/2021/gobyexample_03/>https://ftopia2020.github.io/2021/gobyexample_03/</span>
        </p>
        
        
        <p class="copyright-item lincese">
            本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
        </p>
        
    </div>


    <div class="post-tags">
        
        <section>
            <i class="iconfont icon-tag"></i>Tag(s):
            
            <span class="tag"><a href="https://ftopia2020.github.io/tags/golang/">
                    #Golang</a></span>
            
            <span class="tag"><a href="https://ftopia2020.github.io/tags/%E5%8E%9F%E5%88%9B/">
                    #原创</a></span>
            
        </section>
        
        <section>
            <a href="javascript:window.history.back();">back</a></span> ·
            <span><a href="https://ftopia2020.github.io/">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://ftopia2020.github.io/2021/leetcodedaily_008/" class="prev" rel="prev" title="✍️【每日一题】Go题解 8.搜索二维矩阵"><i
                class="iconfont icon-left"></i>&nbsp;✍️【每日一题】Go题解 8.搜索二维矩阵</a>
        
        
        <a href="https://ftopia2020.github.io/2021/apitestrunner/" class="next" rel="next"
            title="接口自动化测试框架 HTTPRunner3.0">接口自动化测试框架 HTTPRunner3.0&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
        
        
        
        <span id="/2021/gobyexample_03/" class="leancloud_visitors" data-flag-title="💪 三天刷完 Go by Example（下）">
            <span class="post-meta-item-text">访问量 </span>
            <span class="leancloud-visitors-count"></span>
            <p></p>
        </span>
        <div id="vcomments"></div>
        <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
        <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
        <script type="text/javascript">
            new Valine({
                el: '#vcomments',
                appId: 'QzPcfvLVz747mNHBkSQSSoQ8-gzGzoHsz',
                appKey: 'qQnhWMSodU0tlOPBVBSYznVU',
                notify:  false ,
                verify:  false ,
                avatar: 'mp',
                placeholder: '说点什么吧...',
                visitor:  true 
             });
        </script>
        
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2020 - 2022</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://ftopia2020.github.io/">Faye.Fei</a> </span> 
         
         <br />
         
            <a href="http://beian.miit.gov.cn/" target="_blank" rel="external nofollow">沪ICP备18041231号 </a> |
         
		  <span>
           Powered by
           <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a>
         </span> 
      </div>
</footer>













<script type="text/javascript">
    var message_Path = "/live2d/"
    var home_Path = "https://ftopia2020.github.io/"  
</script>


    
     <link href="//lib.baomitu.com/lightgallery/1.6.11/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    



     </div>
  
  </body>
</html>
